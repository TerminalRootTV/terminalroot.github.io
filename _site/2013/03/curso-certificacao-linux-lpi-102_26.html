<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<title>Curso Certificação Linux LPI-102: Configurando o DHCP</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	<meta name="keywords" content="linux, shell script, bash, desenvolvimento, tecnologia">
	<meta name="description" content="">
	<meta name="author" content="Marcos Oliveira">
	<meta name="robots" content="noodp">
	<meta name="reply-to" content="contato@terminalroot.com.br">
	<meta name="generator" content="VIM - Vi IMproved 8.1 (2018 May 18, compiled Apr  7 2019 00:42:18)">
	<meta name="google-site-verification" content="zMxWGsmS5xlxc71KSaJx77T6CfB4bP3hdO_v5qfAsuY">
	<meta name="p:domain_verify" content="2fedc285bd24f0b5808c51a4cbd58e86"/>  
	<!-- Favicons -->
	<link href="/assets/img/site/favicon.png" rel="icon">
	<link href="/assets/img/site/apple-touch-icon.png" rel="apple-touch-icon">
	
	<!-- Google Analytics -->
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-75725905-1', 'auto');
	  ga('send', 'pageview');

	</script>

	<!-- Social: Twitter -->
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@terminalroottv">
	<meta name="twitter:title" content="Curso Certificação Linux LPI-102: Configurando o DHCP">
	<meta name="twitter:description" content="Hoje em dia, quase todas as redes utilizam algum tipo de servidor DHCP.">
	
	<meta property="twitter:image:src" content="http://localhost:4000/assets/img/lpi/dhcp.jpg">
	

	<!-- Social: Facebook / Open Graph -->
	<meta property="og:url" content="http://localhost:4000/2013/03/curso-certificacao-linux-lpi-102_26.html">
	<meta property="og:title" content="Curso Certificação Linux LPI-102: Configurando o DHCP">
	
	<meta property="og:image" content="http://localhost:4000/assets/img/lpi/dhcp.jpg">
	
	<meta property="og:description" content="Hoje em dia, quase todas as redes utilizam algum tipo de servidor DHCP.">
	<meta property="og:site_name" content="Terminal Root">
	<meta property="fb:admins" content="439112053506193"/>


	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Montserrat:300,400,500,700" rel="stylesheet">
	<!-- Bootstrap CSS File -->
	<link href="/assets/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">
	<!-- Libraries CSS Files -->
	<link href="/assets/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
	<link href="/assets/lib/animate/animate.min.css" rel="stylesheet">
	<link href="/assets/lib/ionicons/css/ionicons.min.css" rel="stylesheet">
	<link href="/assets/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
	<link href="/assets/lib/lightbox/css/lightbox.min.css" rel="stylesheet">
	<!-- My Main Stylesheet File -->
	<link rel="stylesheet" href="/assets/css/main.css">
	<link rel="canonical" href="http://localhost:4000/2013/03/curso-certificacao-linux-lpi-102_26.html">
	<link rel="alternate" type="application/rss+xml" title="Terminal Root" href="http://localhost:4000/feed.xml">
	<!-- Main Stylesheet File -->
	<link rel="stylesheet" href="/assets/css/style.css">
</head>

<body>

<header id="header" class="fixed-top">
 <div class="container">
    <div class="logo float-left">
       <!-- Uncomment below if you prefer to use an image logo -->
       <!-- <h1 class="text-light"><a href="#header"><span>NewBiz</span></a></h1> -->
       <a href="/" class="scrollto"><img src="/assets/img/site/logo-blog.png" alt="Terminal Root Logomarca" class="img-fluid"></a>
    </div>
    <nav class="main-nav float-right d-none d-lg-block">
       <ul>
          <li class="active"><a href="/"><i class="fa fa-home"></i> Home</a></li>
          <li><a href="/promo"><i class="fa fa-user"></i> Promoção</a></li>
          <li><a href="/cursos"><i class="fa fa-graduation-cap"></i> Cursos</a></li>
          <li><a href="/blog"><i class="fa fa-comment"></i> Blog</a></li>
          <li>                  
			<a href="#footer" data-toggle="popover" title="Contate-nos:" data-placement="bottom" data-content="contato@terminalroot.com.br">
				<i class="fa fa-paper-plane"></i> Contato
			</a>					
          </li>
          <li>
			<a data-toggle="modal" data-target="#mySearch" class="mySearch" style="cursor:pointer;color:#fff;">
				<i class="fa fa-search" aria-hidden="true"></i> Busca
			</a>
          </li>
       </ul>
    </nav>
    <!-- .main-nav -->
 </div>
</header>


<section id="post-page-header" class="clearfix">


  <div class="page-post-header-info text-center">
    <h2>Curso Certificação Linux LPI-102: Configurando o DHCP</h2>
    <h4>Hoje em dia, quase todas as redes utilizam algum tipo de servidor DHCP.</h4>
	<p style="color: #babdb6;">
		<time datetime="2013-03-26T21:00:00-03:00" itemprop="datePublished">Mar 26, 2013</time>
	</p>
  </div>
</section><!-- #page-post-header -->
  
  <main id="main">
  <section id="post-page">
 
  	<p><img src="/assets/img/lpi/dhcp.jpg" alt="Curso Certificação Linux LPI-102: Configurando o DHCP" title="Curso Certificação Linux LPI-102: Configurando o DHCP" /></p>

<p>Hoje em dia, quase todas as redes utilizam algum tipo de servidor <strong>DHCP</strong>. Em geral, eles são ativados automaticamente ao compartilhar a conexão ou junto com algum outro serviço, de forma que você acaba não aprendendo muita coisa sobre a sua configuração.</p>

<p>De um modo geral, o trabalho de um servidor <strong>DHCP</strong> é bastante simples. Ele responde aos pacotes de <strong>broadcast</strong> das estações, enviando um pacote com um dos endereços IP disponíveis e os demais dados da rede. Os pacotes de broadcast são endereçados ao endereço “<strong>255.255.255.255</strong>” e são retransmitidos pelo <strong>switch</strong> da rede para todas as portas, diferente dos pacotes endereçados a um endereço específico, que são transmitidos apenas na porta relacionada a ele.</p>

<p>Periodicamente o servidor <strong>DHCP</strong> verifica se as estações ainda estão lá, exigindo uma renovação do “<strong>aluguel</strong>” do endereço <strong>IP</strong> (opção “<strong>lease time</strong>”). Isso permite que os endereços IP sejam gastos apenas com quem realmente estiver online, evitando que os endereços disponíveis se esgotem.</p>

<p>O servidor <strong>DHCP</strong> mais usado no <strong>Linux</strong> é o <strong>ISC DHCP</strong>, desenvolvido pela <strong>Internet Systems Consortium</strong>, uma organização sem fins lucrativos dedicada a desenvolver serviços de infra-estrutura usados na Internet, incluindo o <strong>Bind</strong> e o <strong>NTPD</strong>. Caso esteja curioso, a página com o código fonte é a <a href="http://www.isc.org/sw/dhcp/">http://www.isc.org/sw/dhcp/</a>.</p>

<p>Nas distribuições derivadas do <a href="http://www.debian.org/">Debian</a>, o pacote correspondente ao servidor <strong>DHCP</strong> se chama “<strong>dhcp3-server</strong>” e pode ser instalado via <strong>apt-get</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">apt-get <span class="nb">install </span>dhcp3-server</code></pre></figure>

<p>Com o pacote instalado, você pode ativar e desativar o serviço usando os comandos</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/init.d/dhcp3-server start</code></pre></figure>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/init.d/dhcp3-server stop</code></pre></figure>

<p>Como você pode imaginar, o “<strong>3</strong>” corresponde à <strong>versão do software</strong>. Eventualmente ele será substituído pelo “<strong>dhcp4-server</strong>”, o que resultará também na mudança do nome da pasta onde fica o arquivo e do script de inicialização referente ao serviço.</p>

<p>No <strong>Fedora</strong> e no <strong>CentOS</strong>, o pacote se chama simplesmente “<strong>dhcp</strong>” e pode ser instalado usando o <strong>yum</strong></p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">yum <span class="nb">install </span>dhcp</code></pre></figure>

<p>Embora o pacote se chame apenas “<strong>dhcp</strong>”, o script referente ao serviço se chama “<strong>dhcpd</strong>”, de forma que os comandos para iniciar e parar o serviço são</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">service dhcpd start</code></pre></figure>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">service dhcpd stop</code></pre></figure>

<p>Diferente do <strong>Debian</strong>, o serviço não será configurado para ser inicializado durante o boot depois de instalado. Você precisa ativá-lo manualmente usando o comando “<strong>chkconfig</strong>”:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">chkconfig dhcpd on</code></pre></figure>

<p>O arquivo de configuração é o “<strong>dhcpd.conf</strong>”. Nas distribuições derivadas do Debian, o caminho completo para ele é “<strong>/etc/dhcp3/dhcpd.conf</strong>”, enquanto no <strong>Fedora</strong> e no <strong>CentOS</strong> é apenas “<strong>/etc/dhcpd.conf</strong>”, ou seja, um diretório acima.
Apesar dessas diferenças estéticas, o que interessa mesmo é a configuração do arquivo e esta sim é igual, independentemente da distribuição.</p>

<p>Este é um exemplo de arquivo de configuração básico</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/dhcp3/dhcpd.conf
ddns-update-style none<span class="p">;</span>
default-lease-time 600<span class="p">;</span>
max-lease-time 7200<span class="p">;</span>
authoritative<span class="p">;</span>
subnet 192.168.1.0 netmask 255.255.255.0 <span class="o">{</span>
range 192.168.1.100 192.168.1.199<span class="p">;</span>
option routers 192.168.1.1<span class="p">;</span>
option domain-name-servers 208.67.222.222,208.67.220.220<span class="p">;</span>
option broadcast-address 192.168.1.255<span class="p">;</span>
<span class="o">}</span></code></pre></figure>

<p>A opção “<strong>default-lease-time</strong>” controla o tempo de renovação dos endereços <strong>IP</strong>. O “<strong>600</strong>” indica que o servidor verifica a cada dez minutos se as estações ainda estão ativas. Se você tiver mais endereços IP do que máquinas, os endereços IP das estações raramente vão precisar mudar. Mas, no caso de uma rede congestionada, o “<strong>max-lease-time</strong>” determina o tempo máximo que uma estação pode usar um determinado endereço <strong>IP</strong>.</p>

<p>Isso foi planejado para ambientes onde haja escassez de endereços <strong>IP</strong>, como, por exemplo, em um provedor de acesso, onde sempre existem mais clientes do que endereços <strong>IP</strong> disponíveis e se trabalha contando que nem todos vão ficar conectados simultaneamente. Em condições normais, essas duas opções não são muito importantes. O que interessa mesmo é o bloco que vai logo abaixo, onde ficam as configurações da rede.
A opção “<strong>range</strong>” determina a faixa de endereços IP que será usada pelo servidor.</p>

<p>Se você utiliza a faixa de endereços <strong>192.168.1.1</strong> até <strong>192.168.1.254</strong>, por exemplo, pode reservar os endereços de 192.168.1.1 a 192.168.1.100 para estações configuradas com IP fixo e usar os demais para o <strong>DHCP</strong>, ou então reservar uma faixa específica para ele, de 192.168.1.101 a 192.168.1.201, por exemplo. O importante é usar faixas separadas para o DHCP e os micros configurados com <strong>IP fixo</strong>.</p>

<p>Na “<strong>option routers</strong>” vai o endereço do default gateway da rede, ou seja, o endereço do servidor que está compartilhando a conexão. Não é necessário que o mesmo micro que está compartilhando a conexão rode também o servidor DHCP. Pode ser, por exemplo, que na sua rede o gateway seja o próprio modem ADSL que está compartilhando a conexão e o DHCP seja um dos PCs.</p>

<p>A opção “<strong>option domain-name-servers</strong>” contém os servidores DNS que serão usados pelas estações. Ao usar dois ou mais endereços, eles devem ser separados por vírgula, sem espaços. Em geral, você vai usar os próprios endereços DNS do provedor, a menos que você configure um servidor DNS interno na sua rede (que pode ser instalado no próprio micro que está compartilhando a conexão e rodando o DHCP). Estes serviços consomem poucos recursos da máquina.</p>

<p><strong>O servidor DNS</strong> mais usado no <strong>Linux</strong> é o <strong>Bind</strong>. Nas distribuições derivadas do Debian você pode instalá-lo com um “<strong>apt-get install bind</strong>”. O servidor <strong>DNS</strong> pode ser configurado para implementar um sistema de domínios e subdomínios na sua rede, mas o uso mais comum é simplesmente fazer um “cache”, onde o servidor DNS simplesmente repassa as requisições para um dos 13 root servers da internet e vai armazenando os endereços que já foram acessados. Mais adiante teremos um capítulo inteiro dedicado a ele.</p>

<p>Você pode substituir o arquivo de configuração padrão por este modelo, ou editá-lo conforme a necessidade. Ao fazer qualquer alteração no arquivo, você deve reiniciar o servidor DHCP usando o comando</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">/etc/init.d/dhcp3-server restart</code></pre></figure>

<p>ou</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">service dhcpd restart</code></pre></figure>

<p>Com o servidor DHCP configurado, você pode testar a configuração em um dos clientes Linux, configurando a rede usando o “dhclient”, seguido da interface a ser configurada. Ele mostra toda a negociação entre o servidor e o cliente, o que permite que você verifique se o servidor está usando a configuração definida por você</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash">dhclient eth0
Internet Systems Consortium DHCP Client V3.0.4
Copyright 2004-2006 Internet Systems Consortium.
All rights reserved.
For info, please visit http://www.isc.org/sw/dhcp/
Listening on LPF/eth1/00:15:00:4b:68:db
Sending on LPF/eth1/00:15:00:4b:68:db
Sending on Socket/fallback
DHCPREQUEST on eth1 to 255.255.255.255 port 67
DHCPACK from 192.168.1.1
bound to 192.168.1.199 <span class="nt">--</span> renewal <span class="k">in </span>245 seconds.</code></pre></figure>

<p>Como você pode ver, o cliente deve receber a resposta a partir do endereço IP do servidor rodando o servidor DHCP e ser configurado com um endereço dentro da faixa definida por você.</p>

<p>Uma observação importante é que sempre que configurar um servidor com duas placas de rede, você deve configurar o servidor DHCP para escutar apenas na placa da rede local. No Debian, esta configuração vai no arquivo “<strong>/etc/default/dhcp3-server</strong>”. Procure pela linha:</p>

<blockquote>
  <p>INTERFACES=””</p>
</blockquote>

<p>… e adicione a placa que o servidor DHCP deve escutar, como em</p>

<blockquote>
  <p>INTERFACES=”eth0”</p>
</blockquote>

<h2 id="para-que-a-configuração-entre-em-vigor-basta-reiniciar-o-serviço-novamente">Para que a configuração entre em vigor, basta reiniciar o serviço novamente</h2>

<p>Fonte: www.hardware.com.br</p>

  </section>
  </main>
  
  <section id="marketing" class="section-bg" style="color: #fff;">
  <div class="container text-center">
    <p class="ph1">Curso Intensivo de Shell Script Avançado</p>
    <p>Aprenda tudo sobre Terminfo e Termcap, manipulação de Sistema de Arquivos via linha de comando, criação de games, manuais, processos, animações em ASCII e Unicode.</p>
    <a href="/shell">
    	<button class="btn btn-saiba-mais">Mais detalhes</button>
    </a>
  </div>
</section><!-- #marketing -->


</div>



<footer id="footer">
 <div class="footer-top">
    <div class="container">
       <div class="row">
          <div class="col-lg-4 col-md-6 footer-info">
             <p><img src="/assets/img/site/logo-blog.png" alt="" class="img-fluid"></p>
             <br>
             <p>Site sobre GNU/Linux, Desenvolvimento de software, Gentoo, BSD, Open Source e Software Livre . Compra segura e conteúdo confiável via PagSeguro e PayPal .</p>
             <br>
             <img src="/assets/img/site/paycards.png" alt="Bandeiras de cartões" title="Via PagSeguro e PayPal" class="img-footer">
          </div>
          <div class="col-lg-2 col-md-6 footer-links">
             <h4>Links úteis</h4>
             <ul>
                <li><a href="#intro">Home</a></li>
                <li><a href="#about">Como funciona</a></li>
                <li><a href="#services">Cursos</a></li>
                <li><a href="#why-us">Blog</a></li>
             </ul>
          </div>
          <div class="col-lg-3 col-md-6 footer-contact">
             <h4>Contato</h4>
             <p>
                Londrina, Paraná<br>
                Brasil <br>
                <strong>Email:</strong> contato@terminalroot.com.br<br>
             </p>
             <div class="social-links">
                <a href="https://youtube.com/TerminalRootTV" class="youtube"><i class="fa fa-youtube"></i></a>
                <a href="https://twitter.com/TerminalRootTV" class="twitter"><i class="fa fa-twitter"></i></a>
                <a href="https://facebook.com/TerminalRootTV" class="facebook"><i class="fa fa-facebook"></i></a>
                <a href="https://rss.com/TerminalRootTV" class="rss"><i class="fa fa-rss"></i></a>                            
             </div>
          </div>
          <div class="col-lg-3 col-md-6 footer-newsletter">
             <h4>Nosso Newsletter</h4>
             <p>Receba nossas novidades por e-mail.</p>
             <div id="form">
                <input type="email" name="email" id="email"><input type="submit" class="register" value="Inscreva-me">
             </div>
          </div>
       </div>
    </div>
 </div>
 <div class="container">
    <div class="copyright">
       &copy; Copyright <strong>Terminal Root</strong>. Todos os Direitos Reservados
    </div>
    <!--
       <div class="credits">        
         By <a href="https://bootstrapmade.com/">BootstrapMade</a> e modificado por <a href="https://www.linkedin.com/in/marcos-oliveira-049327166/">Marcos Oliveira</a>
       </div>
       -->
 </div>
</footer>

<!-- #footer -->
<a href="#" class="back-to-top"><i class="fa fa-chevron-up"></i></a>
<!-- Uncomment below i you want to use a preloader -->
<!-- <div id="preloader"></div> -->
<!-- JavaScript Libraries -->
<script src="/assets/lib/jquery/jquery.min.js"></script>
<script src="/assets/lib/jquery/jquery-migrate.min.js"></script>
<script src="/assets/lib/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/lib/easing/easing.min.js"></script>
<script src="/assets/lib/mobile-nav/mobile-nav.js"></script>
<script src="/assets/lib/wow/wow.min.js"></script>
<script src="/assets/lib/waypoints/waypoints.min.js"></script>
<script src="/assets/lib/counterup/counterup.min.js"></script>
<script src="/assets/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="/assets/lib/isotope/isotope.pkgd.min.js"></script>
<script src="/assets/lib/lightbox/js/lightbox.min.js"></script>
<script src="/assets/js/main.js"></script>
<script src="/assets/js/sweetalert.min.js"></script>
<script>
$(document).ready(function(){
	$('[data-toggle="popover"]').popover();
	$(".close").click(function(){
		//alert("Clicou");
		//$("#mySearch").hide();
		location.reload();
	});
	$(".register").click(function(){
		var mail = $("#email").val();
		if ( mail != "" ){
			var msg = "Olá, " + mail + "!\n";
		}else{
			var msg = "";
		}
		swal(msg + "Esse campo ainda está em desenvolvimento.\nObrigado por tentar se inscrever.");
	});
});
</script>
  <div class="modal fade text-center" id="mySearch" role="dialog">

    
    <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
    </div>
    
    <input type="text" id="search-input" value="Digite o que você procura aqui" onblur="if(this.value == ''){ this.value='Digite o que você procura aqui';}" onfocus="if(this.value == 'Digite o que você procura aqui'){ this.value='';}">
    <br>
    <ul id="results-container"></ul>
      
    </div>
    
  <script src="/assets/js/search-script.min.js" type="text/javascript"></script>
  <script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
  })
  </script>



</body>
</html>
